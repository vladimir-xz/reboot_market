{% extends 'layout.html.twig' %}

{% block meta %}
    <meta name="turbo-cache-control" content="no-cache">
{% endblock %}

{% block page_contents %}

    <div class="mx-8 mt-2" data-controller="filter" data-action="productFilters:remove@window->filter#removeAll product:updateFilters@window->filter#updateValidFilters">
        <div class="flex justify-between px-4 pb-2">
            <twig:Labels />

            <button 
                data-action="filter#toggle"
                class="cursor-pointer px-6 text-2xl text-slate-100 bg-teal-900 transition ease-in-out delay-100 hover:bg-teal-600" 
            >Filters</button>
        </div>
        <div class="hidden p-8 flex border-2 border solid border-neutral-400"  data-filter-target="body">
            {% for key, values in filter  %}
                {%  if key == 'prices'  %}
                    <div class="flex flex-col w-1/3">
                        <p>{{  key|capitalize  }}</p>
                        <p>{{  values.max  }}</p>
                        <p>{{  values.min  }}</p>
                    </div>
                {%  else  %}
                    <div class="w-1/3">
                        <p>{{  key|capitalize  }}</p>
                        <div data-model="{{  key }}" class="flex flex-col ">
                            {% for value in values  %}
                                <div class="">
                                    <input id="{{  value  }}" data-action="filter#new" data-filter-target="filter" type="checkbox" data-filter-payload-param='{"key":"{{  key  }}", "value":"{{  value  }}"}' ><label for="{{  value  }}">{{  value|capitalize    }}</label>
                                </div>
                            {%  endfor  %}
                        </div>
                    </div>
                {%  endif  %}
            {% endfor %}
        </div>
    </div>

        <twig:ProductSearch/>
        {# <div
            data-controller='product-list' data-action="catalog:reset@window->product-list#resetPage catalog:load@window->product-list#loadingState" 
            data-product-list-page-value="{{ maxNbPages  }}" 
            id="product_scroll" 
            data-product-list-target="result" 
            class="flex flex-wrap gap-4 relative" 
            data-max-page-number="{{ maxNbPages  }}" 
            data-current-page="1"
        >
            <div class="flex flex-wrap gap-4 ">
                <div class="flex justify-between w-full">
                    <h1>Product List</h1>
                    <h3>Total amount: {{   paginator.count  }}  </h3>
                </div>
                {% for product in paginator.currentPageResults %}
                    <twig:Card :product="product"/>
                {% else %}
                    <p>No products found.</p> #}
                {# {% endfo %}
            </div>
        </div>    #}

{% endblock %}

